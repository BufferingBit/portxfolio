<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Me</title>
    <link rel="stylesheet" href="/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Inter&display=swap"
        rel="stylesheet" />
</head>

<body class="bg-space text-light font-inter">
    <%- include('../partials/header.ejs') %>

        <section class="container mx-auto px-4 py-12">
            <h1 class="text-4xl md:text-5xl font-cinzel text-center text-gold mb-12">Send a Raven</h1>

            <div
                class="bg-steel/80 backdrop-blur-sm rounded-2xl shadow-lg p-8 md:p-10 max-w-3xl mx-auto border border-gold/10">
                <form id="contactForm" class="space-y-6">
                    <!-- Name -->
                    <div>
                        <label for="name" class="block text-sm font-semibold mb-2">Name<span
                                class="text-red-400">*</span></label>
                        <input type="text" id="name" name="name" required
                            class="w-full px-4 py-3 rounded-lg bg-[#1F1F2E] text-[#F3F4F6]
                            placeholder-[#9CA3AF] border border-[#4B5563]
                            focus:outline-none focus:border-[#FCD34D] focus:ring-1 focus:ring-[#FCD34D88] transition" />
                    </div>

                    <!-- Email -->
                    <div>
                        <label for="email" class="block text-sm font-semibold mb-2">Email<span
                                class="text-red-400">*</span></label>
                        <input type="email" id="email" name="email" required
                            class="w-full px-4 py-3 rounded-lg bg-[#1F1F2E] text-[#F3F4F6]
                            placeholder-[#9CA3AF] border border-[#4B5563]
                            focus:outline-none focus:border-[#FCD34D] focus:ring-1 focus:ring-[#FCD34D88] transition" />
                    </div>

                    <!-- Message -->
                    <div>
                        <label for="message" class="block text-sm font-semibold mb-2">Message<span
                                class="text-red-400">*</span></label>
                        <textarea id="message" name="message" rows="6" required
                            class="w-full px-4 py-3 rounded-lg bg-[#1F1F2E] text-[#F3F4F6]
                            placeholder-[#9CA3AF] border border-[#4B5563]
                            focus:outline-none focus:border-[#FCD34D] focus:ring-1 focus:ring-[#FCD34D88] transition resize-none"></textarea>
                    </div>

                    <!-- Submit -->
                    <div class="flex justify-end">
                        <button type="submit"
                            class="bg-gold hover:bg-yellow-400 text-black font-semibold px-6 py-2 rounded-xl shadow-lg hover:scale-105 active:scale-95 transition-all duration-200">üì®
                            Send Message</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Toast Notification -->
        <div id="toast"
            class="fixed bottom-6 right-6 bg-steel text-light px-6 py-4 rounded-xl shadow-lg border border-gold/40 hidden transition-all duration-300 z-50">
            <p id="toastMessage" class="text-sm"></p>
        </div>


        <%- include('../partials/footer.ejs') %>


        <script>
            const toast = document.getElementById("toast");
            const toastMessage = document.getElementById("toastMessage");
          
            function showToast(message, isError = false) {
              toastMessage.textContent = message;
              toast.classList.remove("hidden");
              toast.classList.remove("bg-steel", "text-light", "border-gold/40");
              
              if (isError) {
                toast.classList.add("bg-red-700", "text-white", "border-red-500");
              } else {
                toast.classList.add("bg-steel", "text-light", "border-gold/40");
              }
          
              // Auto-hide after 4 seconds
              setTimeout(() => {
                toast.classList.add("hidden");
              }, 4000);
            }
          
            document.getElementById("contactForm").addEventListener("submit", async (e) => {
              e.preventDefault();
          
              const name = document.getElementById("name").value;
              const email = document.getElementById("email").value;
              const message = document.getElementById("message").value;
          
              try {
                const res = await fetch("/contact", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ name, email, message }),
                });
          
                if (res.ok) {
                  showToast("‚öîÔ∏è Message sent successfully!");
                  document.getElementById("contactForm").reset();
                } else {
                  showToast("‚ùå Something went wrong.", true);
                }
              } catch (err) {
                console.error(err);
                showToast("‚ö†Ô∏è Could not send message.", true);
              }
            });
          </script>
          

</body>

</html>